<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
      var result;
      function reqListener() {
        console.log(this)
        result = JSON.parse(this.responseText)
        pageNo = pageNo + 1
        drawResult(result.data.list)
      }


      function drawResult(list) {
        let html = "<table>"
        let n = 0
        for (const item of list) {
          console.log(item)
          if(n%4==0){
            html+="<tr>"
          }
          html +=
            `<td><div>
            <img src = "${item.mainImageUri}" width="200px" /><br/>
            [${item.companyName}]${item.name} <br/>
            ${item.sellerNameList[0]} : ${item.minPrice}원 ~ ${item.maxPrice}원
           </div></td>`
          if(n%4==3){
            html+="</tr>"
          }
          n = n+1

        }


        document.getElementById("foods").innerHTML = html
      }

      function req(no) {
        var oReq = new XMLHttpRequest();
        oReq.addEventListener("load", reqListener);
        oReq.open("GET", "http://localhost:5000/food?size=20&page="+no);
        oReq.send();
      }

      function showMore(){
        req(pageNo)
      }

      let pageNo = 0
      showMore()

    </script>
</head>
<body>

<div id="foods"></div>
<br/>
<button onclick="showMore()">다음 페이지 보기</button>

</body>
</html>